experiment:
  # Basic info suitable for inclusion in eg an NWB file.
  experimenter:
    - Last, First M
    - Last, First Middle
  experiment_description: An PsychoPy demo experiment.
  institution: University of Fiction
  lab: The Fiction Lab
  keywords:
    - PsychoPy
    - tutorial
readers:
  # This is getting verbose and repetetive for the "wide" style of CSV.
  trial_started_reader:
    class: pyramid.neutral_zone.readers.csv.CsvNumericEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: trial_started
      column_selector: [trial.started]
      first_row_is_header: true
    simulate_delay: True
  pause_started_reader:
    class: pyramid.neutral_zone.readers.csv.CsvNumericEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: pause_started
      column_selector: [pause.started]
      first_row_is_header: true
  trial_wrt_reader:
    class: pyramid.neutral_zone.readers.csv.CsvNumericEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: trial_wrt
      column_selector: [cue.started]
      first_row_is_header: true
  prompt_reader:
    class: pyramid.neutral_zone.readers.csv.CsvTextEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: prompt
      column_selector: [prompt.started, prompt_text]
      first_row_is_header: true
  cue_reader:
    class: pyramid.neutral_zone.readers.csv.CsvTextEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: cue
      column_selector: [cue.started, cue_text]
      first_row_is_header: true
  correct_target_reader:
    class: pyramid.neutral_zone.readers.csv.CsvTextEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: correct_target
      column_selector: [trial.started, correct_target]
      first_row_is_header: true
  clicked_name_reader:
    class: pyramid.neutral_zone.readers.csv.CsvTextEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: clicked_name
      column_selector: [trial.stopped, mouse.clicked_name]
      unpack_lists: true
      first_row_is_header: true
  moise_position_reader:
    class: pyramid.neutral_zone.readers.csv.CsvNumericEventReader
    args:
      csv_file: data/690122_hello_pyramid_2024-05-09_15h57.06.136.csv
      result_name: mouse_position
      column_selector: [mouse.time, mouse.x, mouse.y]
      unpack_lists: true
      first_row_is_header: true
    extra_buffers:
      mouse_position:
        reader_result_name: mouse_position
        transformers:
          - class: pyramid.neutral_zone.transformers.standard_transformers.SparseSignal
            args:
              fill_with: null
              sample_frequency: 60
              channel_ids: [x, y]
trials:
  # How to delimit Trials in time, and how to align data within each trial.
  start_buffer: trial_started
  start_value: null
  wrt_buffer: trial_wrt
  wrt_value: null
  enhancers:
    - class: pyramid.trials.standard_enhancers.ExpressionEnhancer
      args:
        expression: text_events['clicked_name'].get_values()[0] == text_events['correct_target'].get_values()[0]
        value_name: correct
    - class: pyramid.trials.standard_enhancers.ExpressionEnhancer
      args:
        expression: text_events['clicked_name'].timestamp_data[0] - text_events['cue'].timestamp_data[0]
        value_name: reaction_time
    - class: pyramid.trials.standard_enhancers.ExpressionEnhancer
      args:
        expression: (text_events['cue'].get_values()[0] == '<---' and text_events['correct_target'].get_values()[0] == 'right') or (text_events['cue'].get_values()[0] == '--->' and text_events['correct_target'].get_values()[0] == 'left')
        value_name: miscue
plotters:
  # In "gui" mode, Pyramid will set up plotters and update each plotter after each trial.
  - class: pyramid.plotters.standard_plotters.BasicInfoPlotter
  - class: pyramid.plotters.standard_plotters.TextEventsPlotter
  - class: pyramid.plotters.standard_plotters.SignalChunksPlotter
    args:
      xmin: -1.0
      xmax: 10.0
      match_pattern: mouse_position
      ylabel: mouse position
